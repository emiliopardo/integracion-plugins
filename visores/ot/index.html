<!DOCTYPE html>
<html>

<head>
    <title>PROTECCIONES TERRITORIALES EN LOS PLANES DE ORDENACIÓN DEL TERRITORIO</title>
    <!-- fichero estilos -->
    <link href="https://mapea4-sigc.juntadeandalucia.es/assets/css/mapea-6.0.0.ol.min.css" rel="stylesheet" />
    <!-- ficheros javascript -->
    <script type="text/javascript" src="https://mapea4-sigc.juntadeandalucia.es/js/mapea-6.0.0.ol.min.js"></script>
    <script type="text/javascript" src="https://mapea4-sigc.juntadeandalucia.es/js/configuration-6.0.0.js"></script>
    <!-- Plugin BaseLayers-->
    <link href="https://emiliopardo.github.io/simplebaselayerselector/simplebaselayerselector.ol.min.css"
        rel="stylesheet" />
    <script type="text/javascript"
        src="https://emiliopardo.github.io/simplebaselayerselector/simplebaselayerselector.ol.min.js"></script>
    <!-- Plugin SimpleLegend-->
    <script type="text/javascript" src="https://emiliopardo.github.io/simplelegend/simplelegend.ol.min.js"></script>
    <link href="https://emiliopardo.github.io/simplelegend/simplelegend.ol.min.css" rel="stylesheet" />
    <!-- Plugin MapHeader-->
    <script type="text/javascript" src="https://emiliopardo.github.io/mapheader/mapheader.ol.min.js"></script>
    <link href="https://emiliopardo.github.io/mapheader/mapheader.ol.min.css" rel="stylesheet" />
    <!-- Plugin MapFooter-->
    <script type="text/javascript" src="https://emiliopardo.github.io/mapfooter/mapfooter.ol.min.js"></script>
    <link href="https://emiliopardo.github.io/mapfooter/mapfooter.ol.min.css" rel="stylesheet" />

    <style>
        html,
        body {
            margin: 0;
            padding: 0;
            height: 100%;
            overflow: hidden;
        }

        #menu {
            width: 50%;
            margin-top: 10px;
            margin-left: 5em;
            position: absolute;
            z-index: 100;
        }
    </style>
</head>

<body>
    <div id="map"></div>
    <script type="text/javascript">
        // DEFINICIÓN CAPAS BASE //

        const ortofoto2016_color = new M.layer.WMS({
            url: 'https://www.ideandalucia.es/wms/ortofoto2016?',
            name: 'ortofotografia_2016_rgb',
            legend: 'Ortofotografía Color 0,5 metros/pixel (Año 2016)',
            transparent: false,
            tiled: true
        }, {
            styles: 'default'
        })

        ortofoto2016_color.setLegendURL('https://www.ideandalucia.es/visor/leyendas/ortofoto2016_color.png')

        const ortofoto2016_pancromatica = new M.layer.WMS({
            url: 'https://www.ideandalucia.es/wms/ortofoto2016?',
            name: 'ortofotografia_2016_pancromatico',
            legend: 'Ortofotografía Pancromática 0,5 metros/pixel (Año 2016)',
            transparent: false,
            tiled: true
        }, {
            styles: 'default'
        })

        ortofoto2016_pancromatica.setLegendURL('https://www.ideandalucia.es/visor/leyendas/ortofoto2016_pancromatico.png');

        const ortofoto2016_infrarrojo = new M.layer.WMS({
            url: 'https://www.ideandalucia.es/wms/ortofoto2016?',
            name: 'ortofotografia_2016_infrarrojo',
            legend: 'Ortofotografía Infrarrojo 0,5 metros/pixel (Año 2016)',
            transparent: false,
            tiled: true
        }, {
            styles: 'default'
        })

        ortofoto2016_infrarrojo.setLegendURL('https://www.ideandalucia.es/visor/leyendas/ortofoto2016_infrarrojo.png');


        const mdt_siose2013 = new M.layer.WMS({
            url: 'https://www.ideandalucia.es/wms/siose_2013?',
            name: 'sombreado_siose_2013',
            legend: 'Siose + MDT 2013',
            transparent: false,
            tiled: true
        }, {
            styles: 'default'
        })

        mdt_siose2013.setLegendURL('https://www.ideandalucia.es/visor/leyendas/siose_2013.png');

        const mdt_2016 = new M.layer.WMS({
            url: 'https://www.ideandalucia.es/wms/mdt_2016?',
            name: 'sombreado_orografico_2016,modelo_digital_terreno_2016_color',
            legend: 'MDT 2016',
            transparent: false,
            tiled: true
        }, {
            styles: 'default'
        })

        mdt_2016.setLegendURL('https://www.ideandalucia.es/visor/leyendas/mdt_2016_tintas_hipsometricas.png');

        const CDAU_Base = new M.layer.WMS({
            url: 'https://www.callejerodeandalucia.es/servicios/base/wms?',
            name: 'CDAU_base',
            legend: 'Base Cartográfica Callejero Digital de Andalucía',
            transparent: false,
            tiled: true
        })

        CDAU_Base.setLegendURL('https://www.ideandalucia.es/visor/leyendas/cdau_base.png');

        const MapaAndalucia = new M.layer.WMS({
            url: 'https://www.ideandalucia.es/services/andalucia/wms?',
            name: '00_Mapa_Andalucia',
            legend: 'Mapa Topográfico de Andalucía',
            transparent: false,
            tiled: true
        })


        // FIN DEFINICIÓN CAPAS BASE //


        let limites_Provinciales_lineal = new M.layer.WMS({
            url: 'https://www.ideandalucia.es/wms/mta10v_2007?',
            name: 'Limites_Provinciales_lineal',
            legend: 'Contornos Provinciales',
            transparent: true,
            tiled: true
        });

        let limites_Municipales_lineal = new M.layer.WMS({
            url: 'https://www.ideandalucia.es/wms/mta10v_2007?',
            name: 'Limites_Municipales_lineal',
            legend: 'Contornos Municipales',
            transparent: true,
            tiled: true
        });


        let contexto_andalucia = new M.layer.WMS({
            url: 'https://www.callejerodeandalucia.es/servicios/base/wms?',
            name: 'contexto_andalucia',
            legend: 'contexto_andalucia',
            transparent: true,
            tiled: true
        });

        let batimetria = new M.layer.WMS({
            url: 'https://www.callejerodeandalucia.es/servicios/base/wms?',
            name: 'batimetria',
            legend: 'batimetria',
            transparent: true,
            tiled: true
        });

        let toponimia = new M.layer.WMS({
            url: 'https://www.callejerodeandalucia.es/servicios/base/wms?',
            name: 'CDAU_toponimia',
            legend: 'Toponimia',
            transparent: true,
            tiled: false
        });

        //PROTECCIÓN TERRITORIAL //
        let PT01 = new M.layer.WMS({
            url: 'https://www.juntadeandalucia.es/fomentoyvivienda/IDE/proteccionterritorial/servicios/wms?',
            name: 'PT01',
            legend: 'Ámbitos de los planes de ordenación del territorio',
            transparent: true,
            tiled: true
        }, {
            styles: 'PT01_Ambipot'
        });

        PT01.setLegendURL('https://www.juntadeandalucia.es/fomentoyvivienda/IDE/proteccionterritorial/servicios/wms?SERVICE=WMS&VERSION=1.1.0&REQUEST=GetLegendGraphic&LAYER=PT01&FORMAT=image%2Fpng&EXCEPTIONS=image%2Fpng&style=PT01_Ambipot')

        let PT07 = new M.layer.WMS({
            url: 'https://www.juntadeandalucia.es/fomentoyvivienda/IDE/proteccionterritorial/servicios/wms?',
            name: 'PT07',
            legend: 'Zonas de protección',
            transparent: true,
            tiled: true
        }, {
            styles: 'PT07_Zoprotec'
        });

        PT07.setLegendURL('https://www.juntadeandalucia.es/fomentoyvivienda/IDE/proteccionterritorial/servicios/wms?SERVICE=WMS&VERSION=1.1.0&REQUEST=GetLegendGraphic&LAYER=PT07&FORMAT=image%2Fpng&EXCEPTIONS=image%2Fpng&style=PT07_Zoprotec')

        let PT08 = new M.layer.WMS({
            url: 'https://www.juntadeandalucia.es/fomentoyvivienda/IDE/proteccionterritorial/servicios/wms?',
            name: 'PT08',
            legend: 'Elementos lineales de protección',
            transparent: true,
            tiled: true
        }, {
            styles: 'PT08_Elinpro'
        });

        PT08.setLegendURL('https://www.juntadeandalucia.es/fomentoyvivienda/IDE/proteccionterritorial/servicios/wms?SERVICE=WMS&VERSION=1.1.0&REQUEST=GetLegendGraphic&LAYER=PT08&FORMAT=image%2Fpng&EXCEPTIONS=image%2Fpng&style=PT08_Elinpro')

        let PT09 = new M.layer.WMS({
            url: 'https://www.juntadeandalucia.es/fomentoyvivienda/IDE/proteccionterritorial/servicios/wms?',
            name: 'PT09',
            legend: 'Elementos puntuales de protección',
            transparent: true,
            tiled: true
        }, {
            styles: 'PT09_Epunpro'
        });

        PT09.setLegendURL('https://www.juntadeandalucia.es/fomentoyvivienda/IDE/proteccionterritorial/servicios/wms?SERVICE=WMS&VERSION=1.1.0&REQUEST=GetLegendGraphic&LAYER=PT09&FORMAT=image%2Fpng&EXCEPTIONS=image%2Fpng&style=PT09_Epunpro')
        // FIN PROTECCIÓN TERRITORIAL //

        mapajs = M.map({
            container: "map",
            controls: ['scale', 'scaleline', 'panzoombar', 'mouse', 'getfeatureinfo', 'navtoolbar'],
            //wmcfiles: ['https://www.juntadeandalucia.es/fomentoyvivienda/IDE/PT/config/wmc/Proteccion_Territorial.xml*mapa', 'https://www.juntadeandalucia.es/fomentoyvivienda/IDE/PT/config/wmc/PT_Satelite.xml*satelite']
            layers: [ortofoto2016_color,
                ortofoto2016_pancromatica,
                ortofoto2016_infrarrojo,
                mdt_siose2013,
                mdt_2016,
                CDAU_Base,
                MapaAndalucia],
        });

        // configuración plugin simpleBaseLayerSelector
        const configSimpleBaseLayerSelector = { displayBaseLayersInLayerSwitcher: false }
        // configuración plugin SimpleLegend
        const configSimpleLegend = {
            title: 'Leyenda',
            draggable: true,
            layers: [PT01, PT07, PT08, PT09]
        }
        // Constructor del plugin Simplebaselayerselector con parámetros de configuración
         const baseLayerSelector = new M.plugin.Simplebaselayerselector(configSimpleBaseLayerSelector);
        // Constructor del plugin SimpleLegend con parámetros de configuración
        const simplelegend = new M.plugin.Simplelegend(configSimpleLegend);
        // Se cargan los plugins en el visor
        mapajs.addPlugin(baseLayerSelector);
        mapajs.addPlugin(simplelegend);

        //CAPAS AUXILIARES NO SE MUESTRAN EN LayerSwitcher
        limites_Municipales_lineal.displayInLayerSwitcher = false;
        limites_Provinciales_lineal.displayInLayerSwitcher = false;
        toponimia.displayInLayerSwitcher = false;
        batimetria.displayInLayerSwitcher = false;
        contexto_andalucia.displayInLayerSwitcher = false;
        //CARGA DE CAPAS AUXILIARES
        mapajs.addLayers([contexto_andalucia, batimetria, limites_Provinciales_lineal, limites_Municipales_lineal])
        // CARGA DE CAPAS TEMÁTICAS
        mapajs.addLayers([PT01, PT07, PT08, PT09])
        //CARGA DE CAPA DE TOPONIMIA
        mapajs.addLayers([toponimia])


    </script>
</body>

</html>